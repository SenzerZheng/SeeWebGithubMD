# 时空复杂度

## 数组和函数的思考

请思考如下两个概念的异同：

1. 一个整型数组元素，例如：arr[100]
2. 一个传入整型并且返回整型的函数，例如：func(100)

关于这个问题呢，我们首先来具象化一下，我们设想一种具体的问题情况，比如说：arr 数组里面，arr[i] 存储的是 2 * i 的值，你可以认为是第 i 个偶数的值；func 函数的功能呢，func(x) = 2*x，就是计算得到第 x 个偶数的值。如下述示意代码所示：

```c
int arr[100] = {0, 2, 4, 6, 8, 10, ...}; 
int func(int x) {
    return 2 * x;
}
```

解析这个示例代码，我们先从数组 arr 和函数 func 的不同处开始说起。

很明显，两者的本质不一样，arr 是数组，对于代码 arr[36]， 相当于访问数组下标 36 的位置中存储的值；而 func 是函数，对于代码 func(36) 来说，也会得到一个整型值，但是这个整型值，却是由 func 的函数逻辑代码计算得到的。简单来说，就是对于 arr 中的值进行访问，是一个静态的过程，而对于 func 函数得到返回值的过程来说，是一个动态计算的过程。

我们再来看看两者的时间和空间效率，也就是代码运行速度以及所需要的存储空间之间的比较。

### 不同

#### 时间效率

关于时间效率方面，通常来说是数组访问速度要比函数计算速度快很多。

#### 空间效率

而空间效率的话，函数通常要比数组节省很多存储空间，就像 func 函数的值，是动态计算得到的，通常情况下，不管我们代码中执行 func(100) 还是 func(10000)，我们不需要修改函数的代码。但对于 arr 数组来说，当我们需要访问 arr[100] 的时候，数组最起码要有 101 个元素空间，而当我们想要访问 arr[10000] 的时候，数组最起码要有 10001 个元素空间。总的来说，就是函数比数组更加节省空间，数组比函数呢，得到结果的速度更快。

### 相同

说完二者的不同以后，我们再来看看二者的相同之处。

站在使用者的角度来看，当你盯着 arr[100] 和 func(100) 这两段代码看的时候，你没觉得这两个代码的异常的相似？func 和 arr 就是名字不一样，如果这个时候我将 func 后面的小括号换成中括号，你是不是就会觉得 func 是一个数组？

对！你可能发现了，在使用者看来，func(100) 和 arr[100] 的作用是完全一样的，区别可能只是中括号和小括号的区别。你不觉得站在使用者的角度，考虑这个问题很有趣么？本质区别很大的两个东西，一个函数，一个数组，突然发现它俩的区别根本没有那么大。

简单来说，就是在数学里，函数做的事情就是“*映射*”，传入一个值，传出一个值。在程序中也不例外，函数做的事情，就是从传入值到传出值的映射。而数组做的事情呢，其实是从下标到存储值的*映射*。你会发现，数组和函数做的事情，本质上都是*映射*！

### 思维总结

最后，我来总结一下，这个总结讲对你日后的程序设计思维有巨大的帮助，这句话就是“函数是压缩的数组，数组是展开的函数”，也就是说当你可以用数组进行程序的时候，你也可以使用某个能够完成相同映射功能的函数来进行替代。二者在程序设计方面的差别，就在于时间和空间的使用效率，数组在时间效率方面占优势，函数在空间效率方面占优势。当你理解了这些事情以后，你就可以更好的理解某些资料里面经常讲的“时间换空间”或者“空间换时间”的概念了。你现在可以简单的理解成为是数组思维和函数思维之间的互相转换。